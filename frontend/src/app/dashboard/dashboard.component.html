<h2>Welcome to Your Dashboard</h2>

<div *ngIf="user">
  <p><strong>Email:</strong> {{ user.email }}</p>
  <p><strong>Roles:</strong> {{ user.roles.join(', ') }}</p>
  <button (click)="logout()">Logout</button>
</div>

<hr />

<h3>Your Accounts</h3>
<button (click)="openAccount()">Open New Account</button>

<div *ngFor="let account of accounts" style="margin-bottom: 20px; border: 1px solid #ccc; padding: 10px;">
  <p><strong>Account Number:</strong> {{ account.accountNumber }}</p>
  <p><strong>Type:</strong> {{ account.type }}</p>
  <p><strong>Balance:</strong> ${{ account.balance.toFixed(2) }}</p>

  <button (click)="viewTransactions(account.id)">View Transactions</button>
  <button (click)="showTransferForm(account.id)">Transfer</button>

  <div *ngIf="selectedAccountNumber === account.id">
    <h4>Transfer Money</h4>
    <input [(ngModel)]="targetAccountNumber" placeholder="Target Account ID" />
    <input [(ngModel)]="transferAmount" placeholder="Amount" type="number" />
    <button (click)="performTransfer(account.id)">Send</button>
  </div>

  <div *ngIf="transactionAccountNumber === account.id">
    <h4>Recent Transactions</h4>
    <ul>
      <li *ngFor="let tx of transactions">
        {{ tx.type }}: ${{ tx.amount.toFixed(2) }} â€” Balance: ${{ tx.balanceAfter.toFixed(2) }}
      </li>
    </ul>
  </div>
</div>
